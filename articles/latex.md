# Настройка для работы с *LaTeX*

Настройка состоит из двух частей: установка самого пакета *LaTeX* и настройка
*Visual Studio Code* для работы с ним.

## Настройка на Windows

1. Для начала необходимо загрузить актуальную версию одного из нескольких
дистрибутивов *LaTeX*. Основные из них это
<a href="http://www.tug.org/texlive/acquire-netinstall.html" target="_blank">*TeXLive*</a>
и <a href="https://miktex.org/download" target="_blank">*MikTeX*</a>.
Далее будем считать, что был выбран *TeXLive*, однако, в целом, процесс
установки аналогичен.

1. Далее необходимо установить загруженный дистрибутив. *TeXLive*
устанавливается в пару кликов, поэтому проблем возникнуть не должно. При
необходимости можно поменять стандартное место установки, однако автор не
гарантирует работоспособность в таком случае (это *Windows*, в нем может быть
всё, что угодно). В случае с *TeXLive* также имеет смысл отказаться от установки
*TeXWorks*, так как пользоваться мы будем *Visual Studio Code*:

    ![TeXLive](../assets/vscode/windows-texlive1.png)

    P.S. Установка занимает значительное время, так что готовься к долгому и
    томительному ожиданию прекрасного
    <img src="../assets/vscode/rs.png" alt="drawing" width="20"/>.

1. Теперь установим плагин *LaTeX Workshop* для *Visual Studio Code*.
Для этого в меню необходимо открыть вкладку `Extensions`.
Получить доступ к ней можно в левой боковой панели или с помощью
`Ctrl + Shift + X`. Далее в поиске необходимо ввести "*LaTeX Workshops*",
перейти на страницу плагина и нажать `Install` в появившемся меню.

1. <a id="tex-win-anchor"></a>Всё необходимое для работы установлено. Теперь
   можно проверить, все ли было установлено корректно, открыв через *Visual
   Studio Code* предварительно созданную папку, создав в ней файл `main.tex` с
   следующим содержимым:

      ```tex
      \documentclass[12pt]{article}
      \begin{document}
      Hello world!
      $Hello world!$ %math mode 
      \end{document}
      ```

    После чего необходимо сохранить файл с помощью `Ctrl + S`.
    Если компиляция PDF-файла не началась автоматически, то необходимо открыть
    вкладку `LaTeX` в левой боковой панели. В меню `Build LaTeX Project`
    располагаются рецепты для сборки. От себя могу лишь порекомендовать
    использовать `latexmk`. В дальнейшем, PDF будет
    собираться повторно после каждого сохранения с помощью
    `Ctrl + S`.

    Если всё было установлено верно, то в папке помимо `main.tex` должны
    появится новые, временные файлы сборки.

    Теперь можно посмотреть полученный PDF-файл, открыв его в `Explorer`. Однако
    есть более приятный способ. Рядом с вкладкой `Build LaTeX Project` находится
    вкладка `View LaTeX PDF`. В ней есть множество способов открыть файл, самый
    удобный, на мой взгляд, `View in VSCode Tab`. Эта опция позволяет
    одновременно редактировать файл и наблюдать превью в другой части экрана, по
    умолчанию в правой.

1. Для полноценной работы необходима некоторая дополнительная настройка. Дело в
том, что некоторые пакеты в *LaTeX* (в каком-то смысле являющиеся аналогом
`#include` в С++) требуют дополнительного ПО для полноценной работы.
Установим его. Нам понадобится:

    1. Установить Python. Для этого переходим на
    <a href="https://www.python.org/downloads/release/python-396/https://www.python.org/downloads/release/python-396/" target="_blank">официальный сайт</a>,
    после чего загружаем версию, соответствующую нашей системе
    `Windows Installer (32/64-bit)`. Если не уверены в битности вашей системы —
    посмотреть ее можно в разделе "Свойства системы" *Windows*.

        > **ВАЖНО!** При установке необходимо поставить галочку возле
        > опции "Добавить путь к *Python* в переменную *PATH*", иначе вы не
        > сможете получить доступ к командам, описанным далее.

        > **ВАЖНО**! После установки **очень желательно** перезагрузить
        > компьютер.

        Теперь, с помощью сочетания `Win + R` выполняем команду `cmd`, после
        чего попадаем в терминал *Windows*. Можно проверить, что *Python* был
        установлен корректно с помощью команды `python --version`. Если терминал
        выводит слово *Python* без версии, то ты попал в ловушку *Windows* (да,
        да, ещё один повод сменить операционную систему). Дело в том, что
        *Microsoft* по каким-то соображениям решила, что загружать *Python*
        следует из их магазина, а не с официального сайта. Поэтому при вводе
        `python` тебя должно перекинуть в *Windows Store* для его установки. Тем
        не менее, мы уже выполнили установку, причем с официального сайта языка.
        Поэтому, достаточно лишь отключить "подмену" исполняемого файла. Для
        этого необходимо попасть в раздел "Псевдонимы выполнения приложения".
        Сделать это удобнее всего, нажав сочетание клавиш `Win + S`, после чего
        введя в поиск название раздела. В нем необходимо сменить ползунок возле
        установщиков приложений `python.exe` и `python3.exe`.

    1. Теперь установим пакет *pygmentize* с помощью команды
    `pip3 install pygments` в терминале (`Win + R` -> `cmd`).

    1. Далее переходим в `Extensions`, находим в списке `LaTeX Workshops`.
    Нажимаем на шестеренку, после чего выбираем `Extension Settings`. В
    строке поиска после уже написанного пишем `recipes`, тем самым находим
    необходимую настройку и жмем `Edit in settings.json`.

        ![TeXLive](../assets/vscode/settings.png)

    1. Находим в файле `"latex-workshop.latex.tools"`. Ниже располагается список
    всех рецептов. В выбранный ранее вами рецепт (можно во все) нужно добавить
    флаг `-shell-escape`. Для `latexmk`, например, должно получиться
    следующее:

        ```json
        {
            "name": "latexmk",
            "command": "latexmk",
            "args": [
                "-synctex=1",
                "-interaction=nonstopmode",
                "-file-line-error",
                "-pdf",
                "-outdir=%OUTDIR%",
                "%DOC%",
                "-shell-escape",
                "-c",
            ],
            "env": {}
        },
        ```

    1. Теперь можно проверить полноценную функциональность. Для оформления
    разного вида работ студентам ПИ и ФИИТ предоставлен шаблон
    *LaTeX*-проекта. Его можно загрузить на портале course.sgu.ru. Кроме
    того, загрузить этот шаблон можно
    <a href="https://github.com/WrongWayboyyyy/textemplate" target="_blank">тут</a>.
    Осталось поместить содержимое в папку и собрать аналогичным образом, как в
    пункте [4](#tex-win-anchor).

## Настройка на Linux

1. Сперва загрузим и установим актуальную версию *TeXLive*. Удобнее
всего сделать это с помощью пакетного менеджера, очень многие
из них содержат *TeXLive*.
Кроме того, советую искать *full* версию, так как она содержит уже все необходимые
пакеты. Для *Ubuntu*, например, достаточно
написать `sudo apt install texlive-full`.

    P.S. Установка занимает значительное время, так что готовься к долгому и
    томительному ожиданию прекрасного
    <img src="../assets/vscode/rs.png" alt="drawing" width="20"/>.

1. Теперь установим плагин *LaTeX Workshop* для *Visual Studio Code*.
Для этого в меню необходимо открыть вкладку `Extensions`.
Получить доступ к ней можно в левой боковой панели или с помощью
`Ctrl + Shift + X`. Далее в поиске необходимо ввести "*LaTeX Workshops*",
перейти на страницу плагина и нажать `Install` в появившемся меню.

1. <a id="tex-linux-anchor"></a>Всё необходимое для работы установлено. Теперь
   можно проверить, все ли было установлено корректно, открыв через *Visual
   Studio Code* предварительно созданную папку, создав в ней файл `main.tex` со
   следующим содержимым:

      ```tex
      \documentclass[12pt]{article}
      \begin{document}
      Hello world!
      $Hello world!$ %math mode 
      \end{document}
      ```

    После чего необходимо сохранить файл с помощью `Ctrl + S`. Если компиляция
    PDF-файла не началась автоматически, то необходимо открыть вкладку `LaTeX` в
    левой боковой панели. В меню `Build LaTeX Project` располагаются рецепты для
    сборки. От себя могу лишь порекомендовать использовать `latexmk`. В
    дальнейшем, PDF будет собираться повторно после каждого сохранения с помощью
    `Ctrl + S`.

    Если всё было установлено верно, то в папке помимо `main.tex` должны появится
    новые, временные файлы сборки.

    Теперь можно посмотреть полученный PDF-файл, открыв его в файловом менеджере
    или через терминал. Однако есть более приятный способ. Рядом с вкладкой
    `Build LaTeX Project` находится вкладка `View LaTeX PDF`. В ней есть
    множество способов открыть файл, самый удобный, на мой взгляд, `View in
    VSCode Tab`. Эта опция позволяет одновременно редактировать файл и наблюдать
    превью в другой части экрана, по умолчанию в правой.

1. Для полноценной работы необходима некоторая дополнительная настройка. Дело в
том, что некоторые пакеты в *LaTeX* (в каком-то смысле являющиеся аналогом
`#include` в С++) требуют дополнительного ПО для полноценной работы.
Установим его. Нам понадобится:

    1. Установить *Python* с помощью пакетного менеджера. В случае с Ubuntu,
       необходимо ввести `sudo apt install python`. Вместе с *Python* чаще всего
       поставляется его пакетный менеджер *pip*, он и пригодится нам в следующем
       шаге.

    1. Затем установить пакет *pygmentize* с помощью `pip3 install pygments`.

    1. Далее переходим в `Extensions`, находим в списке `LaTeX Workshops`.
      Нажимаем на шестеренку, после чего выбираем `Extension Settings`. В строке
      поиска после уже написанного пишем `recipes`, тем самым находим
      необходимую настройку и жмем `Edit in settings.json`.

        ![TeXLive](../assets/vscode/settings.png)

    1. Находим в файле `"latex-workshop.latex.tools"`. Ниже располагается список
      всех рецептов. В выбранный ранее вам рецепт (можно во все) нужно добавить
      флаг `-shell-escape`. Для `latexmk`, например, должно получиться
      следующее:

         ```json
        "name": "latexmk",
            "args": [
            "command": "latexmk",
                "-synctex=1",
                "-interaction=nonstopmode",
                "-file-line-error",
                "-pdf",
                "-outdir=%OUTDIR%",
                "%DOC%",
                "-shell-escape",
            ],
            "env": {}
          ```

    1. Теперь можно проверить полноценную функциональность. Для оформления
      разного вида работ студентам ПИ и ФИИТ предоставлен шаблон
      *LaTeX*-проекта. Его можно загрузить на портале course.sgu.ru. Кроме того,
      загрузить этот шаблон можно
      <a href="https://github.com/WrongWayboyyyy/textemplate" target="_blank">тут</a>.
      Осталось поместить содержимое в папку и собрать аналогичным образом, как в
      пункте [3](#tex-linux-anchor).

## Настройка на OS X

1. С помощью пакетного менеджера  *Homebrew* загрузим актуальную версию
дистрибутива *LaTeX* под *OS X* с помощью команды `brew install mactex`, после
чего дожидаемся окончания установки.

    P.S. Установка занимает значительное время, так что готовься к долгому и
    томительному ожиданию прекрасного
    <img src="../assets/vscode/rs.png" alt="drawing" width="20"/>.

1. Теперь установим плагин *LaTeX Workshop* для *Visual Studio Code*. Для этого
в меню необходимо открыть вкладку `Extensions`. Получить доступ к ней можно в
левой боковой панели или с помощью `Cmd + Shift + X`. Далее в поиске необходимо
ввести "*LaTeX Workshops*", перейти на страницу плагина и нажать `Install` в
появившемся меню.

1. <a id="tex-mac-anchor"></a>Всё необходимое для работы установлено. Теперь
   можно проверить, все ли было установлено корректно, открыв через *Visual
   Studio Code* предварительно созданную папку, создав в ней файл `main.tex` со
   следующим содержимым:

      ```tex
      \documentclass[12pt]{article}
      \begin{document}
      Hello world!
      $Hello world!$ %math mode 
      \end{document}
      ```

    После чего необходимо сохранить файл с помощью `Cmd + S`. Если компиляция
    PDF-файла не началась автоматически, то необходимо открыть вкладку `LaTeX` в
    левой боковой панели. В меню `Build LaTeX Project` располагаются рецепты для
    сборки. От себя могу лишь порекомендовать использовать `latexmk`. В
    дальнейшем, PDF будет собираться повторно после каждого сохранения с помощью
    `Cmd + S`.

    Если всё было установлено верно, то в папке помимо `main.tex` должны
    появится новые, временные файлы сборки.

    Теперь можно посмотреть полученный PDF-файл, открыв его в `Finder`. Однако
    есть более приятный способ. Рядом с вкладкой `Build LaTeX Project` находится
    вкладка `View LaTeX PDF`. В ней есть множество способов открыть файл, самый
    удобный, на мой взгляд, `View in VSCode Tab`. Эта опция позволяет
    одновременно редактировать файл и наблюдать превью в другой части экрана, по
    умолчанию в правой.

1. Для полноценной работы необходима некоторая дополнительная настройка. Дело в
   том, что некоторые пакеты в *LaTeX* (в каком-то смысле являющиеся аналогом
   `#include` в С++) требуют дополнительного ПО для полноценной работы.
   Установим его. Нам понадобится:

    1. Установить Python с помощью `brew install python`.

    1. Затем установить пакет *pygmentize* с помощью `pip3 install pygments`.

    1. Далее переходим в `Extensions`, находим в списке `LaTeX Workshops`.
       Нажимаем на шестеренку, после чего выбираем `Extension Settings`. В
       строке поиска после уже написанного пишем `recipes`, тем самым находим
       необходимую настройку и жмем `Edit in settings.json`.
        ![TeXLive](../assets/vscode/settings.png)

    1. Находим в файле `"latex-workshop.latex.tools"`. Ниже располагается список
       всех рецептов. В выбранный ранее вам рецепт (можно во все) нужно добавить
       флаг `-shell-escape`. Для `latexmk`, например, должно получиться
       следующее:

         ```json
        "name": "latexmk",
            "args": [
            "command": "latexmk",
                "-synctex=1",
                "-interaction=nonstopmode",
                "-file-line-error",
                "-pdf",
                "-outdir=%OUTDIR%",
                "%DOC%",
                "-shell-escape",
            ],
            "env": {}
          ```

    1. Теперь можно проверить полноценную функциональность. Для оформления
       разного вида работ студентам ПИ и ФИИТ предоставлен шаблон
       *LaTeX*-проекта. Его можно загрузить на портале course.sgu.ru. Кроме
       того, загрузить этот шаблон можно
       <a href="https://github.com/WrongWayboyyyy/textemplate" target="_blank">тут</a>.
       Осталось поместить содержимое в папку и собрать
       аналогичным образом, как в пункте [3](#tex-mac-anchor).

> Автор: [Никита Рыданов](../authors/nikita_rydanov.md)
